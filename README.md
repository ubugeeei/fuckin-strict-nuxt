# 関数型ドメインモデリング

## Reference

- https://x.com/ubugeeei/status/2000831033516941824?s=20
- https://syu-m-5151.hatenablog.com/entry/2026/01/22/094654

## AI と開発する際のコツ

AI にコーディングを手伝ってもらう際は、以下のようなルールを伝えておくと良いでしょう。

> `.def` ファイルは定義ファイルなので編集しないでください。実装は `.impl` ファイルに記述してください。

定義と実装を分離している設計意図を AI に理解させることで、意図しないファイルの変更を防ぐことができます。

### 開発フロー

AI との開発は以下のサイクルで進めると効果的です。

#### 1. `.def` を書く（仕様定義）

まず `.def` ファイルに型定義と仕様（コメント）を書きます。この段階で「何を作るか」を明確にします。

- 自然言語プロンプトから `.def` を生成させることも可能

#### 2. `.spec` を書く（テスト生成）

`.def` の定義を使ってテストを書かせます。

- AI に「この定義に対するテストを書いて」と依頼
- テストケースが不足していたり間違っていたら補足・修正

#### 3. `.impl` を書く（実装生成）

テストを満たすように `.impl` を自動生成させます。

- AI に「テストが通るように実装して」と依頼
- テストが通らなければ修正を繰り返す

#### 4. PDCA を回す

上記のサイクルを繰り返し、品質を高めていきます。

### 対人レビューのタイミング

チーム開発では、以下のタイミングでレビューを挟むと効果的です。

- **`.def` の段階**: 仕様の認識合わせ、設計の壁打ち
- **`.spec` の段階**: テストケースの網羅性確認、エッジケースの検討

実装（`.impl`）は仕様とテストが固まっていれば、AI に任せて自動生成できます。